"use strict";var _logger=_interopRequireDefault(require("../utils/logger"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.normalizeHandler=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const normalizeHandler=a=>{let b=0;return b=a&&null!==a&&0!==Object.keys(a).length?Object.keys(a).length:null,_logger.default.addMeta({recordCount:b}),null===b?null:Object.values(a).map(a=>({messageId:a.messageId,receiptHandle:a.receiptHandle,...JSON.parse(a.body)}))};exports.normalizeHandler=normalizeHandler;const normalizeSQSMessage=()=>({before:(a,b)=>{const{Records:c}=a.event;a.event.collection=normalizeHandler(c),b()}});var _default=normalizeSQSMessage;exports.default=_default;