"use strict";var _logger=_interopRequireDefault(require("../utils/logger"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.errorHttpResponseAfterHandler=exports.errorHttpResponseHandler=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const errorHttpResponseHandler=a=>{const b={response:"",statusCode:500,event:{},debugMode:!1,headers:{"Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Origin":"*","Cache-Control":"no-cache"},error:""},c=void 0===a?{...b.headers}:{...a,headers:{...b.headers,...a.headers}},d={...b,...c},e={status:"error",data:null,error:{code:d.error.code||"UNKNOWN_ERROR",message:d.error.name?`${d.error.name}: ${d.error.message}`:d.error.message||d.error,details:d.error.extra||""},_meta:d.debugMode?d.event:{}},f=d.error.statusCode||d.statusCode;return 500===f&&_logger.default.error(d.error),{headers:d.headers,statusCode:f,body:JSON.stringify(e)}};exports.errorHttpResponseHandler=errorHttpResponseHandler;const errorHttpResponseAfterHandler=(a,b,c)=>{const d={error:a.error,event:a.event,logger:console.error},e={...d,...c};a.response=errorHttpResponseHandler(e),b()};exports.errorHttpResponseAfterHandler=errorHttpResponseAfterHandler;const errorHttpResponse=a=>({onError:(b,c)=>errorHttpResponseAfterHandler(b,c,a)});var _default=errorHttpResponse;exports.default=_default;